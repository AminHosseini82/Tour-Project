{% extends 'safario/base.html' %} {# مطمئن شو مسیر base.html درست است #}
{% load static %}

{% block title %}صفحه اصلی - سفر سافاریو{% endblock title %}

{% block content %}
    {# فقط محتوای مخصوص صفحه اصلی از اینجا شروع می‌شود #}

    <section class="hero-banner magic-ball">
        <div class="container">
            <div class="row align-items-center text-center text-md-right">
                <div class="col-md-6 col-lg-5 mb-5 mb-md-0">
                    <h1>بیشتر سفر کنید تا خودتان را کشف کنید</h1>
                    <p>هر سفر، داستانی‌ست که نوشته می‌شود؛ خاطره‌ای‌ست که جاودانه می‌ماند. ما در سافاریو به شما کمک می‌کنیم
                        تا بهترین داستان‌ها را بیافرینید و لحظاتی فراموش‌نشدنی را تجربه کنید. برای ساختن خاطرات بعدی
                        آماده‌اید؟</p>
                    <a class="button button-hero mt-4" href="#">سفر رویایی‌تان را بسازید</a>
                </div>
                <div class="col-md-6 col-lg-7 col-xl-6 offset-xl-1">
                    <img class="img-fluid" src="{% static 'safario/img/home/hero-img.png' %}"
                         alt="منظره زیبای کوهستان و دریاچه برای سفر ماجراجویانه">
                </div>
            </div>
        </div>
    </section>

    <section class="section-margin generic-margin">
        <div class="container">
            <div class="section-intro text-center pb-90px">
                <img class="section-intro-img" src="{% static 'safario/img/home/section-icon.png' %}"
                     alt="آیکن بخش خدمات ما">
                <h2>خدمات محبوب ما</h2>
                <p>ما بهترین خدمات گردشگری را با کیفیت بالا به شما ارائه می‌دهیم.</p>
            </div>

            <div class="row">
                <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="service-card text-center">
                        <div class="service-card-img">
                            <img class="img-fluid" src="{% static 'safario/img/home/service1.png' %}" alt="سرویس رزرو هتل">
                        </div>
                        <div class="service-card-body">
                            <h3>رزرو هتل</h3>
                            <p>بهترین هتل‌ها را با قیمت مناسب برای اقامت شما رزرو می‌کنیم.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="service-card text-center">
                        <div class="service-card-img">
                            <img class="img-fluid" src="{% static 'safario/img/home/service2.png' %}"
                                 alt="سرویس رزرو پرواز">
                        </div>
                        <div class="service-card-body">
                            <h3>رزرو تور و هتل</h3>
                            <p>پروازهای داخلی به تمام نقاط جهان با بهترین نرخ‌ها.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="service-card text-center">
                        <div class="service-card-img">
                            <img class="img-fluid" src="{% static 'safario/img/home/service3.png' %}" alt="سرویس رزرو مقصد">
                        </div>
                        <div class="service-card-body">
                            <h3>رزرو مقصد</h3>
                            <p>مقاصد گردشگری رویایی خود را با ما انتخاب و رزرو کنید.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="bg-gray section-padding magic-ball magic-ball-about">
        <div class="container">
            <div class="row">
                <div class="col-lg-7 col-md-6 mb-4 mb-md-0">
                    <div class="about-img">
                        <img class="img-fluid" src="{% static 'safario/img/home/about-img.png' %}"
                             alt="تصویری درباره تیم سافاریو">
                    </div>
                </div>
                <div class="col-lg-5 col-md-6 align-self-center about-content">
                    <h2>کاوشگری <br class="d-none d-xl-block"> واقعاً جوهره <br class="d-none d-xl-block"> روح انسان است
                    </h2>
                    <p>آیا رویای دیدن مکان‌های جدید و تجربه فرهنگ‌های متفاوت را در سر دارید؟ سافاریو اینجاست تا رویاهای شما
                        را به خاطراتی فراموش‌نشدنی تبدیل کند. ما به قدرت سفر برای الهام بخشیدن و تغییر زندگی ایمان
                        داریم.</p>
                    <a class="button" href="#">ماجراجویی‌های بیشتر</a>
                </div>
            </div>
        </div>
    </section>

    <section class="section-margin pb-xl-5">
        <div class="container">
            <div class="section-intro text-center pb-90px">
                <img class="section-intro-img" src="{% static 'safario/img/home/section-icon.png' %}"
                     alt="آیکن بخش تورهای ویژه">
                <h2>تورهای ویژه ما</h2>
                <p>چند نمونه از بهترین تورهایی که برای شما آماده کرده‌ایم.</p>
            </div>

            <div class="row">
                {# فرض می‌کنیم view شما متغیری به نام 'featured_tours' یا 'tours' به این template پاس می‌دهد #}
                {# که حاوی لیستی از تورهای منتخب برای نمایش در صفحه اصلی است. #}
                {# اگر نام متغیر متفاوت است، آن را در حلقه جایگزین کنید. #}
                {% for tour in tours %} {# یا tours اگر نام متغیر در context همین است #}
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="tour-card h-100">
                            <div class="tour-image-container" style="position: relative;">
                                {% if tour.image %}
                                    <img class="card-img-top rounded-0"
                                         src="{{ tour.image.url }}" alt="{{ tour.title }}">
                                {% else %}
                                    <img class="card-img-top rounded-0"
                                         src="{% static 'safario/img/default_tour_image.png' %}"
                                         alt="تصویر پیش‌فرض تور">
                                {% endif %}

                                <div class="tour-card-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; align-items: flex-end; background: rgba(0,0,0,0.0); transition: background 0.3s ease;"> {# استایل اولیه overlay #}
                                    <div class="media" style="background: rgba(255,255,255,0.9); padding: 10px; width: 100%; opacity: 0; transition: opacity 0.3s ease;"> {# محتوای overlay که در هاور ظاهر می‌شود #}
                                        <div class="media-body">
                                            <h4><a href="{% url 'tour:tour_detail' tour.id %}"
                                                   style="color: #333;">{{ tour.title }}</a></h4>
                                            <small>{{ tour.firstdistination }} <i
                                                    class="fas fa-arrow-left"></i> {{ tour.lastDestination }}</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {# در صفحه اصلی، دکمه‌های ویرایش و حذف نمایش داده نمی‌شوند #}
                        </div>
                    </div>
                {% empty %}
                    <div class="col-12">
                        <p class="text-center">در حال حاضر تور ویژه‌ای برای نمایش موجود نیست.</p>
                    </div>
                {% endfor %}
            </div>

            <div class="text-center mt-5">
                <a class="button" href="{% url 'tour:homepage' %}">مشاهده همه تورها</a>
            </div>
        </div>
    </section>
    <section class="bg-gray section-padding magic-ball magic-ball-testimonial pb-xl-5">
        <div class="container">
            <div class="section-intro text-center pb-90px">
                <img class="section-intro-img" src="{% static 'safario/img/home/section-icon.png' %}"
                     alt="آیکن بخش نظرات مشتریان">
                <h2>مشتریان ما چه می‌گویند</h2>
                <p>نظرات و تجربیات مشتریان ما از خدمات سافاریو.</p>
            </div>
            <div class="owl-carousel owl-theme testimonial pb-xl-5">
                <div class="testimonial__item">
                    <div class="row">
                        <div class="col-md-3 col-lg-2 align-self-center">
                            <div class="testimonial__img">
                                <img class="card-img rounded-0" src="{% static 'safario/img/testimonial/t-slider1.png' %}"
                                     alt="تصویر مشتری - Daniel heart">
                            </div>
                        </div>
                        <div class="col-md-9 col-lg-10">
                            <div class="testimonial__content mt-3 mt-sm-0">
                                <h3>Daniel heart</h3>
                                <p>Nestle</p>
                                <p class="testimonial__i">"سفر با سافاریو فراتر از انتظارم بود! از همان لحظه اول، حرفه‌ای
                                    بودن تیم و توجهشان به جزئیات شگفت‌زده‌ام کرد. مناظری که دیدم و تجربیاتی که کسب کردم، تا
                                    همیشه در خاطرم خواهد ماند. بدون شک، سافاریو انتخاب اول من برای سفرهای بعدی است و با
                                    اطمینان به همه دوستانم پیشنهادش می‌کنم."</p>
                                <span class="testimonial__icon"><i class="ti-quote-right"></i></span>
                            </div>
                        </div>
                    </div>
                </div>
                {# ... سایر آیتم‌های testimonial ... #}
            </div>
        </div>
    </section>

    <section class="section-padding bg-gray">
        <div class="container">
            <div class="section-intro text-center pb-90px">
                <img class="section-intro-img" src="{% static 'safario/img/home/section-icon.png' %}" alt="آیکن بخش وبلاگ">
                <h2>از وبلاگ ما</h2>
                <p>آخرین مقالات، نکات سفر و اخبار گردشگری را در وبلاگ ما بخوانید.</p>
            </div>

            <div class="row">
                <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="card-blog">
                        <img class="card-img rounded-0" src="{% static 'safario/img/blog/blog-1.png' %}"
                             alt="تصویر مطلب وبلاگ: نکاتی برای سفر به جنگل">
                        <div class="card-blog-body">
                            <a href="#">
                                <h4>نکاتی برای سفر به مناطق جنگلی و کمپینگ</h4>
                            </a>
                            <ul class="card-blog-info">
                                <li><a href="#"><span class="align-middle"><i class="ti-notepad"></i></span>ژانویه 03, 2018</a>
                                </li>
                                <li><a href="#"><span class="align-middle"><i class="ti-comments-smiley"></i></span>03
                                    نظر</a></li>
                            </ul>
                            <p>در این مطلب، به بررسی نکات مهم برای یک سفر ایمن و لذت‌بخش به جنگل می‌پردازیم.</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="card-blog">
                        <img class="card-img rounded-0" src="{% static 'safario/img/blog/blog-2.png' %}"
                             alt="تصویر مطلب وبلاگ: معرفی مقاصد ارزان">
                        <div class="card-blog-body">
                            <a href="#">
                                <h4>معرفی بهترین مقاصد گردشگری ارزان در تابستان</h4>
                            </a>
                            <ul class="card-blog-info">
                                <li><a href="#"><span class="align-middle"><i class="ti-notepad"></i></span>فوریه 15,
                                    2018</a>
                                </li>
                                <li><a href="#"><span class="align-middle"><i class="ti-comments-smiley"></i></span>05
                                    نظر</a></li>
                            </ul>
                            <p>اگر به دنبال سفری اقتصادی هستید، این مقاصد تابستانی را از دست ندهید.</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="card-blog">
                        <img class="card-img rounded-0" src="{% static 'safario/img/blog/blog-3.png' %}"
                             alt="تصویر مطلب وبلاگ: عکاسی در سفر">
                        <div class="card-blog-body">
                            <a href="#">
                                <h4>چگونه در سفر عکس‌های حرفه‌ای بگیریم؟</h4>
                            </a>
                            <ul class="card-blog-info">
                                <li><a href="#"><span class="align-middle"><i class="ti-notepad"></i></span>مارس 22,
                                    2018</a>
                                </li>
                                <li><a href="#"><span class="align-middle"><i class="ti-comments-smiley"></i></span>12
                                    نظر</a></li>
                            </ul>
                            <p>نکات و ترفندهای عکاسی در سفر برای ثبت بهترین خاطرات شما.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {# حذف بخش تکراری تورها از انتهای کد قبلی شما، چون بالاتر اضافه شد #}

{% endblock content %}


{% block extra_js %}
    <script>
        // اسکریپت ساده برای افکت هاور روی کارت‌های تور در صفحه اصلی
        document.addEventListener('DOMContentLoaded', function () {
            const tourCards = document.querySelectorAll('.tour-image-container');
            tourCards.forEach(card => {
                const overlayContent = card.querySelector('.tour-card-overlay .media');
                const overlayContainer = card.querySelector('.tour-card-overlay');

                if (overlayContent && overlayContainer) {
                    card.addEventListener('mouseenter', () => {
                        overlayContainer.style.background = 'rgba(0,0,0,0.3)'; // پس زمینه تیره تر در هاور
                        overlayContent.style.opacity = '1';
                    });
                    card.addEventListener('mouseleave', () => {
                        overlayContainer.style.background = 'rgba(0,0,0,0.0)'; // برگرداندن پس زمینه به شفاف
                        overlayContent.style.opacity = '0';
                    });
                }
            });
        });
    </script>
{% endblock extra_js %}